; PL/M-80 Compiler Output - MON1
; Target: Z80
; Generated by uplm80

	.Z80

	ORG	0100H


; Module initialization code
	LD	HL,(6)
	LD	SP,HL
	CALL MAIN
	JP	0
	EXTRN	MON1
	EXTRN	MON2

; Procedure PRINTCHAR
PRINTCHAR:
	LD C,2
	LD E,A
	JP 5

; Procedure CRLF
CRLF:
	LD A,0DH
	CALL PRINTCHAR
	LD A,0AH
	JR PRINTCHAR

; Procedure PRINTHEX
PRINTHEX:
	LD (??AUTO+5),A
	LD C,4
??SHR0001:
	DEC C
	JP M,??SHRE0002
	OR A
	LD A,H
	RRA
	LD H,A
	LD A,L
	RRA
	LD L,A
	JR ??SHR0001
??SHRE0002:
	LD A,L
	LD (??AUTO+6),A
	CP 9
	JR C,??ELSE0003
	JR Z,??ELSE0003
	LD A,(??AUTO+6)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0004
??ELSE0003:
	LD A,(??AUTO+6)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0004:
	LD A,(??AUTO+5)
	AND 0FH
	LD (??AUTO+6),A
	CP 9
	JR C,??ELSE0005
	JR Z,??ELSE0005
	LD A,(??AUTO+6)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0006
??ELSE0005:
	LD A,(??AUTO+6)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0006:
	RET

; Procedure MAIN
MAIN:
	CALL CRLF
	LD C,1AH
	LD DE,80H
	CALL 5
	LD C,0FH
	LD DE,5CH
	CALL 5
	LD (??AUTO+1),A
	CP 0FFH
	JR NZ,??ENDIF0008
	LD A,45H
	CALL PRINTCHAR
	LD A,31H
	CALL PRINTCHAR
	JP CRLF
??ENDIF0008:
	LD C,14H
	LD DE,5CH
	CALL 5
	LD (??AUTO+1),A
	OR A
	JR Z,??ENDIF0010
	LD A,45H
	CALL PRINTCHAR
	LD A,32H
	CALL PRINTCHAR
	JP CRLF
??ENDIF0010:
	XOR A
	LD (??AUTO+0),A
	JR ??TEST0012
??FOR0011:
	LD A,80H
	LD B,A
	LD A,(??AUTO+0)
	ADD A,B
	LD (??AUTO+2),HL
	LD A,M
	CALL PRINTHEX
	LD A,(??AUTO+0)
	AND 0FH
	CP 0FH
	JR NZ,??ELSE0015
	CALL CRLF
	JR ??ENDIF0016
??ELSE0015:
	LD A,20H
	CALL PRINTCHAR
??ENDIF0016:
??INCR0013:
	LD HL,??AUTO+0
	INC (HL)
??TEST0012:
	LD A,(??AUTO+0)
	CP	40H
	JR	C,??FOR0011
??NEXT0014:
	JP CRLF

; Data segment
CONOUT:	EQU	2
OPENF:	EQU	0FH
READF:	EQU	14H
SETDMA:	EQU	1AH

; Shared automatic storage (8 bytes)
??AUTO:
	DS	8

; End of program data
??MEMORY:

	END
