; PL/M-80 Compiler Output - MON1
; Target: Z80
; Generated by uplm80

	.Z80


; Module initialization code
	LD	HL,(6)
	LD	SP,HL
	CALL MAIN
	JP	0
	EXTRN	MON1

; Procedure PRINTCHAR
PRINTCHAR:
	LD C,2
	LD E,A
	JP 5

; Procedure PRINTSTR
PRINTSTR:
	LD (??AUTO+10),HL
	LD C,9
	EX DE,HL
	JP 5

; Procedure MAIN
MAIN:
	LD HL,0
	LD (??AUTO+6),HL
	LD HL,1
	LD (??AUTO+8),HL
	LD DE,(??AUTO+8)
	LD HL,(??AUTO+6)
	CALL ??SUBDE
	LD A,H
	OR A
	JP P,??ELSE0001
	LD HL,@MAIN$MSGOK
	CALL PRINTSTR
	JR ??ENDIF0002
??ELSE0001:
	LD HL,@MAIN$MSGFAIL
	CALL PRINTSTR
??ENDIF0002:
	LD HL,@MAIN$MSGCRLF
	JR PRINTSTR

; Runtime library
; PL/M-80 Runtime Library
??SUBDE:
; 16-bit subtract: HL = HL - DE (Z80)
; Input: HL, DE
; Output: HL = HL - DE, flags set
	OR	A		; Clear carry
	SBC	HL,DE
	RET

; Data segment
CONOUT:	EQU	2
PRTSTR:	EQU	9
@MAIN$MSGOK:
	DB	'OK$'
@MAIN$MSGFAIL:
	DB	'FAIL$'
@MAIN$MSGCRLF:
	DB	0DH
	DB	0AH
	DB	'$'

; Shared automatic storage (12 bytes)
??AUTO:
	DS	12

; End of program data
??MEMORY:

	END
