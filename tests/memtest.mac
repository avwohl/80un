; PL/M-80 Compiler Output - MON1
; Target: Z80
; Generated by uplm80

	.Z80


; Module initialization code
	LD	HL,(6)
	LD	SP,HL
	CALL MAIN
	JP	0
	EXTRN	MON1

; Procedure PRINTCHAR
PRINTCHAR:
	LD C,2
	LD E,A
	JP 5

; Procedure CRLF
CRLF:
	LD A,0DH
	CALL PRINTCHAR
	LD A,0AH
	JR PRINTCHAR

; Procedure PRINTHEX
PRINTHEX:
	LD (??AUTO+0),A
	LD C,4
??SHR0001:
	DEC C
	JP M,??SHRE0002
	OR A
	LD A,H
	RRA
	LD H,A
	LD A,L
	RRA
	LD L,A
	JR ??SHR0001
??SHRE0002:
	LD A,L
	LD (??AUTO+1),A
	CP 9
	JR C,??ELSE0003
	JR Z,??ELSE0003
	LD A,(??AUTO+1)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0004
??ELSE0003:
	LD A,(??AUTO+1)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0004:
	LD A,(??AUTO+0)
	AND 0FH
	LD (??AUTO+1),A
	CP 9
	JR C,??ELSE0005
	JR Z,??ELSE0005
	LD A,(??AUTO+1)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0006
??ELSE0005:
	LD A,(??AUTO+1)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0006:
	RET

; Procedure POKEB
POKEB:
	LD B,A
	LD HL,(??AUTO+0)
	LD M,B
	RET

; Procedure PEEKB
PEEKB:
	LD (??AUTO+0),HL
	LD A,M
	RET

; Procedure MAIN
MAIN:
	CALL CRLF
	XOR A
	LD (??AUTO+4),A
??WHILE0007:
	LD A,(??AUTO+4)
	CP 10H
	JR NC,??WEND0008
	LD A,80H
	LD B,A
	LD A,(??AUTO+4)
	ADD A,B
	LD (??AUTO+0),A
	LD A,0AAH
	CALL POKEB
	LD HL,??AUTO+4
	INC M
	JR ??WHILE0007
??WEND0008:
	XOR A
	LD (??AUTO+4),A
??WHILE0009:
	LD A,(??AUTO+4)
	CP 10H
	JR NC,??WEND0010
	LD A,80H
	LD B,A
	LD A,(??AUTO+4)
	ADD A,B
	LD L,A
	LD H,0
	CALL PEEKB
	CALL PRINTHEX
	LD A,20H
	CALL PRINTCHAR
	LD HL,??AUTO+4
	INC M
	JR ??WHILE0009
??WEND0010:
	JP CRLF

; Data segment
CONOUT:	EQU	2

; Shared automatic storage (5 bytes)
??AUTO:
	DS	5

; End of program data
??MEMORY:

	END
