/*
 * 80UN Test - DATA inside procedures, arrays at module level
 */

0100H:

MON1: PROCEDURE(FUNC, PARM) EXTERNAL;
    DECLARE FUNC BYTE, PARM ADDRESS;
END MON1;

DECLARE
    CONOUT LITERALLY '2',
    PRTSTR LITERALLY '9',
    CR LITERALLY '13',
    LF LITERALLY '10';

/* Arrays at module level (no DATA) */
DECLARE
    IFCB(36) BYTE,
    OFCB(36) BYTE;

PRINTCHAR: PROCEDURE(C);
    DECLARE C BYTE;
    CALL MON1(CONOUT, C);
END PRINTCHAR;

CRLF: PROCEDURE;
    CALL PRINTCHAR(CR);
    CALL PRINTCHAR(LF);
END CRLF;

PRINTSTR: PROCEDURE(S);
    DECLARE S ADDRESS;
    CALL MON1(PRTSTR, S);
END PRINTSTR;

PRINT: PROCEDURE(S);
    DECLARE S ADDRESS;
    CALL CRLF;
    CALL PRINTSTR(S);
END PRINT;

MAIN: PROCEDURE;
    /* DATA inside procedure */
    DECLARE MSG1 DATA('80UN - CP/M Archive Unpacker v1.0$');
    DECLARE MSG2 DATA('Second message$');

    CALL PRINT(.MSG1);
    CALL CRLF;
    CALL PRINT(.MSG2);
END MAIN;

CALL MAIN;

EOF
