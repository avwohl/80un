; PL/M-80 Compiler Output - MON1
; Target: Z80
; Generated by uplm80

	.Z80

	ORG	0100H


; Module initialization code
	LD	HL,(6)
	LD	SP,HL
	CALL MAIN
	JP	0
	EXTRN	MON1

; Procedure PRINTCHAR
PRINTCHAR:
	LD C,2
	LD E,A
	JP 5

; Procedure CRLF
CRLF:
	LD A,0DH
	CALL PRINTCHAR
	LD A,0AH
	JR PRINTCHAR

; Procedure PRINTHEX
PRINTHEX:
	LD (??AUTO+0),A
	LD C,4
??SHR0001:
	DEC C
	JP M,??SHRE0002
	OR A
	LD A,H
	RRA
	LD H,A
	LD A,L
	RRA
	LD L,A
	JR ??SHR0001
??SHRE0002:
	LD A,L
	LD (??AUTO+1),A
	CP 9
	JR C,??ELSE0003
	JR Z,??ELSE0003
	LD A,(??AUTO+1)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0004
??ELSE0003:
	LD A,(??AUTO+1)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0004:
	LD A,(??AUTO+0)
	AND 0FH
	LD (??AUTO+1),A
	CP 9
	JR C,??ELSE0005
	JR Z,??ELSE0005
	LD A,(??AUTO+1)
	LD B,A
	LD A,41H
	ADD A,B
	SUB 0AH
	CALL PRINTCHAR
	JR ??ENDIF0006
??ELSE0005:
	LD A,(??AUTO+1)
	LD B,A
	LD A,30H
	ADD A,B
	CALL PRINTCHAR
??ENDIF0006:
	RET

; Procedure MAIN
MAIN:
	CALL CRLF
	XOR A
	LD (??AUTO+3),A
	JR ??TEST0008
??FOR0007:
	LD A,(??AUTO+3)
	LD L,A
	LD H,0
	LD DE,FCB
	ADD HL,DE
	LD A,M
	CALL PRINTHEX
	LD A,20H
	CALL PRINTCHAR
	LD A,(??AUTO+3)
	AND 0FH
	CP 0FH
	JR NZ,??ENDIF0012
	CALL CRLF
??ENDIF0012:
??INCR0009:
	LD HL,??AUTO+3
	INC (HL)
??TEST0008:
	LD A,(??AUTO+3)
	CP	24H
	JR	C,??FOR0007
??NEXT0010:
	CALL CRLF
	LD A,1
	LD (??AUTO+3),A
	JR ??TEST0014
??FOR0013:
	LD A,(??AUTO+3)
	LD L,A
	LD H,0
	LD DE,FCB
	ADD HL,DE
	LD A,M
	CP 20H
	JR C,??ELSE0017
	LD A,(??AUTO+3)
	LD L,A
	LD H,0
	LD DE,FCB
	ADD HL,DE
	LD A,M
	CALL PRINTCHAR
	JR ??ENDIF0018
??ELSE0017:
	LD A,3FH
	CALL PRINTCHAR
??ENDIF0018:
??INCR0015:
	LD HL,??AUTO+3
	INC (HL)
??TEST0014:
	LD A,(??AUTO+3)
	CP	0CH
	JR	C,??FOR0013
??NEXT0016:
	JP CRLF

; Data segment
CONOUT:	EQU	2
PRTSTR:	EQU	9
FCB:	EQU	5CH

; Shared automatic storage (4 bytes)
??AUTO:
	DS	4

; End of program data
??MEMORY:

	END
